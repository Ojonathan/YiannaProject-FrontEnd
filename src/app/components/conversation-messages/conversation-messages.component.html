<div fxLayout="column" fxLayoutAlign="start none" fxFlexFill>
  <h2 class="messages-label">
    Messages
  </h2>

  <mat-divider></mat-divider>

  <div fxFlex *ngIf="!activated" fxLayout="column" fxLayoutAlign="center center" >
    <h2 class="messages-label">
      No messages
    </h2>
    <h2 class="messages-label">
      Select conversation
    </h2>
  </div>

  <div *ngIf="activated && isLoaded" id="messages" class="messages">
    <div class="message" *ngFor="let message of messages" fxLayout="row" fxLayoutAlign="start" >
      <div fxFlex="70px" fxLayoutAlign="start start">
        <img class="message-avatar" [src]="message.avatarSender"
          onerror="this.src='assets/default-user.png'" alt="" />
      </div>

      <div class="test" fxFlex fxLayout="column">
        <div><b>{{message.senderName}}</b></div>
        <div>{{message.content}}</div>
      </div>
    </div>
  </div>

  <div *ngIf="activated && isLoaded" class="sendMessage" fxLayout="row" fxLayoutAlign="start end">
    <mat-form-field fxFlex="70%">
      <mat-label>Write a message</mat-label>
      <textarea matInput
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5"
                #messageToSend
                required></textarea>
    </mat-form-field>


    <button fxFlex class="buttonSend" mat-raised-button color="primary" (click)="onSendMessage(messageToSend.value)">
      Send
    </button>
  </div>
</div>
